(this["webpackJsonparistek-template-v1"]=this["webpackJsonparistek-template-v1"]||[]).push([[0],{103:function(e,n){var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"getAlbums"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"page"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"albums"},arguments:[{kind:"Argument",name:{kind:"Name",value:"options"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"paginate"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"page"},value:{kind:"Variable",name:{kind:"Name",value:"page"}}},{kind:"ObjectField",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}}]}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"username"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"photos"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"meta"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:297}};t.loc.source={body:"query getAlbums($page: Int, $limit: Int) {\n  albums(options: { paginate: { page: $page, limit: $limit } }) {\n    data {\n      id\n      title\n      user {\n        id\n        username\n      }\n      photos {\n        data {\n          id\n        }\n      }\n    }\n    meta {\n      totalCount\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};function i(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var t=e.type;"NamedType"===t.kind&&n.add(t.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){i(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){i(e,n)})),e.definitions&&e.definitions.forEach((function(e){i(e,n)}))}var a={};function l(e,n){for(var t=0;t<e.definitions.length;t++){var i=e.definitions[t];if(i.name&&i.name.value==n)return i}}t.definitions.forEach((function(e){if(e.name){var n=new Set;i(e,n),a[e.name.value]=n}})),e.exports=t,e.exports.getAlbums=function(e,n){var t={kind:e.kind,definitions:[l(e,n)]};e.hasOwnProperty("loc")&&(t.loc=e.loc);var i=a[n]||new Set,r=new Set,c=new Set;for(i.forEach((function(e){c.add(e)}));c.size>0;){var s=c;c=new Set,s.forEach((function(e){r.has(e)||(r.add(e),(a[e]||new Set).forEach((function(e){c.add(e)})))}))}return r.forEach((function(n){var i=l(e,n);i&&t.definitions.push(i)})),t}(t,"getAlbums")},276:function(e,n,t){"use strict";t.r(n);var i=t(1),a=t.n(i),l=t(24),r=t(60),c=t(21),s=t(286),d=t(287),o=t(285),u=t(7),b=t(11),j=t(6),m=Object(i.createContext)(null),h=function(){return!!localStorage.getItem("fake-token")},O=function(e){var n=e.children,t=Object(i.useState)(h),a=Object(b.a)(t,2),l=a[0],r=a[1],c=Object(u.h)(),s={user:l,signIn:function(){localStorage.setItem("fake-token",(new Date).toString()),r(!0),c("/admin_panel/albums",{replace:!0})},signOut:function(){localStorage.removeItem("fake-token"),r(!1)}};return Object(j.jsx)(m.Provider,{value:s,children:n})},v=function(){return Object(i.useContext)(m)},g=function(e){var n=e.children;return v().user?n:Object(j.jsx)(u.a,{to:"/admin_panel/login"})},f=function(){return Object(j.jsx)("h1",{children:"Album"})},x=t(288),p=t(98),k=t(70),S=t(101),w=t(100),N=t(92),y=function(e){var n=e.albumsCount,t=e.setParams,a=e.currentPage,l=e.setCurrentPage,r=e.pageSize,c=e.setPageSize,s=Object(i.useState)([]),d=Object(b.a)(s,2),o=d[0],u=d[1];Object(i.useEffect)((function(){u(Array(n/r).fill("").map((function(e,n){return 1+n})))}),[n,r]);return Object(j.jsxs)(p.c,{gap:"1",justifyContent:"center",wrap:"wrap",children:[Object(j.jsxs)(w.a,{size:"sm",fontWeight:"semibold",bg:"white",borderRadius:"md",w:"15",value:r,onChange:function(e){var n=Number(e.target.value);c(n),l(1),t({page:"1",limit:String(n)})},children:[Object(j.jsx)("option",{value:"10",children:"10"}),Object(j.jsx)("option",{value:"20",children:"20"}),Object(j.jsx)("option",{value:"50",children:"50"})]}),Object(j.jsx)(S.b,{bg:"none",size:"sm",borderRadius:"50%","aria-label":"Previous page",icon:Object(j.jsx)(N.a,{}),_hover:{bg:"teal.600",color:"white"},disabled:1===a,onClick:function(){return l(a-1),void t({page:a-1,limit:String(r)})}}),o.map((function(e){return Object(j.jsx)(S.a,{size:"sm",borderRadius:"full",bg:e===a?void 0:"none",colorScheme:e===a?"teal":void 0,_hover:{bg:"teal.600",color:"white"},onClick:function(){return l(n=e),void t({page:String(n),limit:String(r)});var n},children:e},e)})),Object(j.jsx)(S.b,{bg:"none",size:"sm",borderRadius:"50%","aria-label":"Next page",icon:Object(j.jsx)(N.b,{}),_hover:{bg:"teal.600",color:"white"},disabled:a===o.length,onClick:function(){return l(a+1),void t({page:a+1,limit:String(r)})}})]})},C=function(){return null},F=t(102),I=t(127),z=function(e){var n=e.data,t=e.children;return Object(j.jsx)(F.b,{children:Object(j.jsxs)(F.a,{children:[Object(j.jsx)(F.f,{children:Object(j.jsx)(F.g,{children:a.a.Children.map(t,(function(e){return Object(j.jsx)(F.e,{children:e.props.label})}))})}),Object(j.jsx)(F.c,{children:n.map((function(e){return Object(j.jsx)(F.g,{children:a.a.Children.map(t,(function(n){var t=Object(I.get)(e,n.props.dataKey);return Object(j.jsx)(F.d,{children:t})}))},e.id)}))})]})})},A=t(103),P=function(){var e,n=Object(c.c)(),t=Object(b.a)(n,2),a=t[0],l=t[1],r=Object(i.useState)(Number(a.get("page"))||1),s=Object(b.a)(r,2),d=s[0],o=s[1],u=Object(i.useState)(Number(a.get("limit"))||10),m=Object(b.a)(u,2),h=m[0],O=m[1],v=Object(x.a)(A.getAlbums,{variables:{page:d,limit:h}}),g=v.loading,f=v.data;if(!f||g)return Object(j.jsx)(p.a,{display:"flex",alignItems:"center",justifyContent:"center",children:Object(j.jsx)(k.a,{color:"teal.500"})});if(null!==f&&void 0!==f&&null!==(e=f.albums)&&void 0!==e&&e.data){var w,N=f.albums.data.map((function(e){var n,t,i;return{id:null===e||void 0===e?void 0:e.id,title:null===e||void 0===e?void 0:e.title,username:null===e||void 0===e||null===(n=e.user)||void 0===n?void 0:n.username,pagesCount:null===e||void 0===e||null===(t=e.photos)||void 0===t||null===(i=t.data)||void 0===i?void 0:i.length}}));return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)(z,{data:N,children:[Object(j.jsx)(C,{label:"ID",dataKey:"id"}),Object(j.jsx)(C,{label:"Title",dataKey:"title"}),Object(j.jsx)(C,{label:"Username",dataKey:"username"}),Object(j.jsx)(C,{label:"Number of photos",dataKey:"pagesCount"})]}),Object(j.jsx)(c.b,{to:"../albums/create",children:Object(j.jsx)(S.a,{colorScheme:"teal",my:"2",children:"Create album"})}),Object(j.jsx)(y,{albumsCount:(null===(w=f.albums.meta)||void 0===w?void 0:w.totalCount)||0,setParams:l,currentPage:d,setCurrentPage:o,pageSize:h,setPageSize:O})]})}return Object(j.jsx)("code",{children:"data.albums = null"})},E=function(){return Object(j.jsx)("h1",{children:"Create album"})},_=function(){return Object(j.jsx)("h1",{children:"Edit album"})},D=t(77),q=t(39),V=t(134),R=t(17),T=function(e){var n=e.onSubmit,t=e.validationSchema,i=e.children,a=Object(R.f)({resolver:Object(V.a)(t)});return Object(j.jsx)(R.a,Object(q.a)(Object(q.a)({},a),{},{children:Object(j.jsx)("form",{onSubmit:a.handleSubmit(n),children:i})}))},$=t(76),K=t(125),L=t(46),G=function(e){var n,t=e.children,i=e.name,a=e.label,l=Object(R.g)().formState.errors;return Object(j.jsxs)(L.a,{isInvalid:!!l[i],children:[Object(j.jsx)(L.c,{htmlFor:i,children:a}),t,Object(j.jsx)(L.b,{children:l[i]&&(null===(n=l[i])||void 0===n?void 0:n.message)})]})},B=["name","label","rules"],Z=function(e){var n=e.name,t=e.label,i=e.rules,a=Object($.a)(e,B),l=Object(R.g)().control,r=Object(R.e)({control:l,name:n,rules:i}).field,c=r.onChange,s=r.onBlur,d=r.value,o=r.ref;return Object(j.jsx)(G,{name:n,label:t,children:Object(j.jsx)(K.a,Object(q.a)({ref:o,name:n,value:d,onChange:c,onBlur:s},a))})},J=["children"],M=function(e){var n=e.children,t=Object($.a)(e,J),i=Object(R.g)().formState.isSubmitting;return Object(j.jsx)(S.a,Object(q.a)(Object(q.a)({isLoading:i},t),{},{children:n}))},W=D.a({email:D.b().required("This is required").email("Must be a valid email"),password:D.b().required("This is required")}).required(),H=function(){var e=v().signIn;return Object(j.jsx)(p.b,{maxW:"container.xxl",bgGradient:"linear(to-r, green.100, pink.300)",children:Object(j.jsx)(p.c,{h:"100vh",align:"center",justify:"center",children:Object(j.jsxs)(p.a,{p:10,w:"500px",bgColor:"white",borderRadius:"lg",children:[Object(j.jsx)(p.d,{size:"lg",textAlign:"center",children:"Log In"}),Object(j.jsxs)(T,{onSubmit:function(){return e()},validationSchema:W,children:[Object(j.jsx)(Z,{name:"email",label:"Email",rules:{pattern:/^[a-zA-Z0-9.!#$%&\u2019*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/}}),Object(j.jsx)(Z,{name:"password",label:"Password",type:"password"}),Object(j.jsx)(M,{w:"full",mt:"4",colorScheme:"teal",type:"submit",children:"Log In"})]})]})})})},Q=t(57),U=t(45),X=t(132),Y=function(){var e=v().signOut;return Object(j.jsx)(p.a,{bg:Object(Q.c)("white","gray.900"),borderRight:"1px",borderRightColor:Object(Q.c)("gray.200","gray.700"),w:"60",pos:"fixed",px:4,children:Object(j.jsxs)(p.c,{direction:"column",justifyContent:"space-between",h:"100vh",children:[Object(j.jsxs)(p.a,{mt:"4",children:[Object(j.jsx)(p.d,{mb:"4",size:"md",children:"Admin Panel"}),Object(j.jsx)(c.b,{to:"/admin_panel/albums",children:Object(j.jsx)(S.a,{colorScheme:"teal",variant:"ghost",w:"full",justifyContent:"flex-start",leftIcon:Object(j.jsx)(U.a,{as:X.a}),role:"group",_hover:{bg:"teal",color:"white"},children:"Albums"})})]}),Object(j.jsx)(S.a,{w:"full",mb:4,colorScheme:"teal",onClick:e,children:"Log Out"})]})})},ee=function(){return Object(j.jsxs)(p.a,{minH:"100vh",bgGradient:"linear(to-r, green.100, pink.300)",children:[Object(j.jsx)(Y,{}),Object(j.jsx)(p.a,{ml:{sm:120,md:60},p:"4",children:Object(j.jsx)(u.b,{})})]})},ne=function(){return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("div",{children:["This page does not exist. Go ",Object(j.jsx)(c.b,{to:"/admin_panel/albums",children:"home"})]})})},te=new s.a({uri:"https://graphqlzero.almansi.me/api",cache:new d.a}),ie=function(){return Object(j.jsx)(o.a,{client:te,children:Object(j.jsx)(O,{children:Object(j.jsxs)(u.e,{children:[Object(j.jsxs)(u.c,{path:"admin_panel",element:Object(j.jsx)(g,{children:Object(j.jsx)(ee,{})}),children:[Object(j.jsx)(u.c,{path:"albums",element:Object(j.jsx)(P,{})}),Object(j.jsx)(u.c,{path:"albums/:id",element:Object(j.jsx)(f,{})}),Object(j.jsx)(u.c,{path:"albums/:id/edit",element:Object(j.jsx)(_,{})}),Object(j.jsx)(u.c,{path:"albums/create",element:Object(j.jsx)(E,{})})]}),Object(j.jsx)(u.c,{path:"admin_panel/login",element:Object(j.jsx)(H,{})}),Object(j.jsx)(u.c,{path:"*",element:Object(j.jsx)(ne,{})})]})})})};r.render(Object(j.jsx)(i.StrictMode,{children:Object(j.jsx)(c.a,{children:Object(j.jsx)(l.a,{children:Object(j.jsx)(ie,{})})})}),document.getElementById("root"))}},[[276,1,2]]]);
//# sourceMappingURL=main.5c3011ba.chunk.js.map