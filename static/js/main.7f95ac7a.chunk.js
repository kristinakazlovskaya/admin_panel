(this["webpackJsonparistek-template-v1"]=this["webpackJsonparistek-template-v1"]||[]).push([[0],{128:function(e,n){var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"getAlbums"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"page"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"albums"},arguments:[{kind:"Argument",name:{kind:"Name",value:"options"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"paginate"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"page"},value:{kind:"Variable",name:{kind:"Name",value:"page"}}},{kind:"ObjectField",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}}]}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"username"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"photos"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"meta"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:297}};t.loc.source={body:"query getAlbums($page: Int, $limit: Int) {\n  albums(options: { paginate: { page: $page, limit: $limit } }) {\n    data {\n      id\n      title\n      user {\n        id\n        username\n      }\n      photos {\n        data {\n          id\n        }\n      }\n    }\n    meta {\n      totalCount\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};function i(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var t=e.type;"NamedType"===t.kind&&n.add(t.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){i(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){i(e,n)})),e.definitions&&e.definitions.forEach((function(e){i(e,n)}))}var a={};function r(e,n){for(var t=0;t<e.definitions.length;t++){var i=e.definitions[t];if(i.name&&i.name.value==n)return i}}t.definitions.forEach((function(e){if(e.name){var n=new Set;i(e,n),a[e.name.value]=n}})),e.exports=t,e.exports.getAlbums=function(e,n){var t={kind:e.kind,definitions:[r(e,n)]};e.hasOwnProperty("loc")&&(t.loc=e.loc);var i=a[n]||new Set,c=new Set,l=new Set;for(i.forEach((function(e){l.add(e)}));l.size>0;){var s=l;l=new Set,s.forEach((function(e){c.has(e)||(c.add(e),(a[e]||new Set).forEach((function(e){l.add(e)})))}))}return c.forEach((function(n){var i=r(e,n);i&&t.definitions.push(i)})),t}(t,"getAlbums")},279:function(e,n,t){"use strict";t.r(n);var i=t(1),a=t(33),r=t(47),c=t(26),l=t(294),s=t(295),o=t(293),d=t(10),u=t(15),j=t(51),b=t(296),m=t(93),h=t(127),O=t(14),g=t(115),v=t(126),p=t(6),x=function(e){var n=e.headers,t=e.content;return Object(p.jsx)(v.c,{children:Object(p.jsxs)(v.a,{variant:"simple",children:[Object(p.jsx)(v.h,{children:Object(p.jsx)(v.i,{children:n.map((function(e){return Object(p.jsx)(v.g,{children:e},e)}))})}),Object(p.jsx)(v.d,{children:t.map((function(e){return Object(p.jsx)(v.i,{children:Object.values(e).map((function(e){return Object(p.jsx)(v.e,{children:e},e)}))},e.id)}))}),Object(p.jsx)(v.f,{children:Object(p.jsx)(v.i,{children:n.map((function(e){return Object(p.jsx)(v.g,{children:e},e)}))})})]})})},f=t(128),k=function(){var e,n=Object(c.c)(),t=Object(u.a)(n,2),a=t[0],r=t[1],l=Object(i.useState)(0),s=Object(u.a)(l,2),o=s[0],d=s[1],v=Object(j.usePagination)({total:o,initialState:{currentPage:Number(a.get("page"))||1,pageSize:Number(a.get("size"))||10},limits:{outer:1,inner:1}}),k=v.currentPage,S=v.setCurrentPage,w=v.pagesCount,C=v.pages,y=v.pageSize,N=v.setPageSize,P=Object(b.a)(f.getAlbums,{variables:{page:k,limit:y}}),F=P.loading,I=P.data;Object(i.useEffect)((function(){var e;null!==I&&void 0!==I&&null!==(e=I.albums)&&void 0!==e&&e.meta&&d(Number(I.albums.meta.totalCount))}),[null===I||void 0===I||null===(e=I.albums)||void 0===e?void 0:e.meta]);return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)(h.b,{fontWeight:"semibold",ml:"auto",bg:"white",onChange:function(e){var n=Number(e.target.value);N(n),S(1),r({page:"1",limit:String(n)})},w:20,children:[Object(p.jsx)("option",{value:"10",children:"10"}),Object(p.jsx)("option",{value:"20",children:"20"}),Object(p.jsx)("option",{value:"50",children:"50"})]}),function(){var e;if(!I||F)return Object(p.jsx)(m.a,{color:"teal.500"});if(null!==I&&void 0!==I&&null!==(e=I.albums)&&void 0!==e&&e.data){var n=I.albums.data.map((function(e){var n,t,i;return{id:null===e||void 0===e?void 0:e.id,title:null===e||void 0===e?void 0:e.title,username:null===e||void 0===e||null===(n=e.user)||void 0===n?void 0:n.username,pagesCount:null===e||void 0===e||null===(t=e.photos)||void 0===t||null===(i=t.data)||void 0===i?void 0:i.length,actions:"[actions]"}}));return Object(p.jsx)(x,{headers:["ID","Title","Username","Number of photos",""],content:n})}}(),Object(p.jsx)(j.Pagination,{pagesCount:w,currentPage:k,onPageChange:function(e){S(e),r({page:String(e),limit:String(y)})},children:Object(p.jsxs)(j.PaginationContainer,{justify:"center",children:[Object(p.jsx)(j.PaginationPrevious,{bg:"none",_hover:{bg:"none"},children:Object(p.jsx)(O.a,{as:g.a})}),Object(p.jsx)(j.PaginationPageGroup,{separator:Object(p.jsx)(j.PaginationSeparator,{w:7,bg:"gray.100"}),children:C.map((function(e){return Object(p.jsx)(j.PaginationPage,{w:7,page:e,_hover:{bg:"teal.600",color:"white"},_current:{bg:"teal.500",color:"white"}},"pagination_page_".concat(e))}))}),Object(p.jsx)(j.PaginationNext,{bg:"none",_hover:{bg:"none"},children:Object(p.jsx)(O.a,{as:g.b})})]})})]})},S=Object(i.createContext)(null),w=function(){return!!localStorage.getItem("fake-token")},C=function(e){var n=e.children,t=Object(i.useState)(w),a=Object(u.a)(t,2),r=a[0],c=a[1],l=Object(d.h)(),s={user:r,signIn:function(){localStorage.setItem("fake-token",(new Date).toString()),c(!0),l("/admin_panel",{replace:!0})},signOut:function(){localStorage.removeItem("fake-token"),c(!1)}};return Object(p.jsx)(S.Provider,{value:s,children:n})},y=function(){return Object(i.useContext)(S)},N=function(e){var n=e.children;return y().user?n:Object(p.jsx)(d.a,{to:"/admin_panel/login"})},P=function(){return Object(p.jsx)("h1",{children:"Album"})},F=function(){return Object(p.jsx)("h1",{children:"Create album"})},I=function(){return Object(p.jsx)("h1",{children:"Edit album"})},A=t(125),z=t(123),_=t(161),E=t(58),D=t(98),q=t(25),V=t(57),T=["onSubmit","children"],$=function(e){var n=e.onSubmit,t=e.children,i=Object(V.a)(e,T);return Object(p.jsx)("form",Object(q.a)(Object(q.a)({onSubmit:n},i),{},{children:t}))},G=t(28),L=t(124),W=["name","label","type","error","rules","register"],B=function(e){var n=e.name,t=e.label,i=e.type,a=void 0===i?"text":i,r=e.error,c=e.rules,l=e.register,s=Object(V.a)(e,W);return Object(p.jsx)(A.d,Object(q.a)(Object(q.a)({},s),{},{children:Object(p.jsxs)(G.a,{isInvalid:!!r,children:[Object(p.jsx)(G.e,{htmlFor:n,children:t}),Object(p.jsx)(L.a,Object(q.a)({id:n,type:a,placeholder:t},l(n,c))),Object(p.jsx)(G.c,{children:r&&r.message})]})}))},R=D.a({email:D.b().required("This is required").email("Must be a valid email"),password:D.b().required("This is required")}).required(),Z=function(){var e=y().signIn,n=Object(E.d)({resolver:Object(_.a)(R)}),t=n.handleSubmit,i=n.register,a=n.formState,r=a.errors,c=a.isSubmitting,l=t((function(){return e()}));return Object(p.jsx)(A.h,{maxW:"container.xxl",bgGradient:"linear(to-r, green.100, pink.300)",children:Object(p.jsx)(A.j,{h:"100vh",align:"center",justify:"center",children:Object(p.jsxs)(A.d,{p:10,w:"500px",bgColor:"white",borderRadius:"lg",children:[Object(p.jsx)(A.n,{size:"lg",textAlign:"center",children:"Log In"}),Object(p.jsxs)($,{onSubmit:l,children:[Object(p.jsx)(B,{name:"email",label:"Email",error:r.email,rules:{pattern:/^[a-zA-Z0-9.!#$%&\u2019*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/},register:i}),Object(p.jsx)(B,{mt:"2",name:"password",label:"Password",type:"password",error:r.password,register:i}),Object(p.jsx)(z.a,{w:"full",mt:4,colorScheme:"teal",isLoading:c,type:"submit",children:"Log In"})]})]})})})},J=t(7),M=t(150),H=t(79),Q=t(157),U=["onOpen"],K=function(e){var n=e.onOpen,t=Object(V.a)(e,U);return Object(p.jsxs)(A.j,Object(q.a)(Object(q.a)({ml:{base:0,md:60},px:{base:4,md:24},height:"20",alignItems:"center",bg:Object(H.k)("white","gray.900"),borderBottomWidth:"1px",borderBottomColor:Object(H.k)("gray.200","gray.700"),justifyContent:"flex-start"},t),{},{children:[Object(p.jsx)(z.d,{variant:"outline",onClick:n,"aria-label":"open menu",icon:Object(p.jsx)(Q.a,{})}),Object(p.jsx)(A.C,{fontSize:"2xl",ml:"8",fontWeight:"bold",children:"Admin Panel"})]}))},X=t(53),Y=t(159),ee=t(158),ne=function(e){var n=e.icon,t=e.path,i=e.children;return Object(p.jsx)(c.b,{to:t,children:Object(p.jsx)(z.a,{colorScheme:"teal",variant:"ghost",w:"full",justifyContent:"flex-start",leftIcon:Object(p.jsx)(O.a,{as:n}),role:"group",_hover:{bg:"teal",color:"white"},children:i})})},te=["onClose"],ie=[{name:"Albums",icon:ee.a,path:"albums"},{name:"Create album",icon:Y.a,path:"albums/create"}],ae=function(e){var n=e.onClose,t=Object(V.a)(e,te),i=y().signOut;return Object(p.jsx)(A.d,Object(q.a)(Object(q.a)({bg:Object(H.k)("white","gray.900"),borderRight:"1px",borderRightColor:Object(H.k)("gray.200","gray.700"),w:{base:"full",md:60},pos:"fixed",px:4},t),{},{children:Object(p.jsxs)(A.j,{direction:"column",h:"100vh",children:[Object(p.jsxs)(A.j,{h:"20",alignItems:"center",justifyContent:"space-between",children:[Object(p.jsx)(A.n,{size:"md",children:"Admin Panel"}),Object(p.jsx)(X.a,{display:{base:"flex",md:"none"},onClick:n})]}),ie.map((function(e){return Object(p.jsx)(ne,{icon:e.icon,path:e.path,children:e.name},e.name)})),Object(p.jsx)(A.x,{}),Object(p.jsx)(z.a,{w:"full",mb:4,colorScheme:"teal",onClick:i,children:"Log Out"})]})}))},re=function(){var e=Object(J.j)(),n=e.isOpen,t=e.onOpen,i=e.onClose;return Object(p.jsxs)(A.d,{minH:"100vh",bgGradient:"linear(to-r, green.100, pink.300)",children:[Object(p.jsx)(ae,{onClose:function(){return i},display:{base:"none",md:"block"}}),Object(p.jsx)(M.h,{autoFocus:!1,isOpen:n,placement:"left",onClose:i,returnFocusOnClose:!1,onOverlayClick:i,size:"full",children:Object(p.jsx)(M.k,{children:Object(p.jsx)(ae,{onClose:i})})}),Object(p.jsx)(K,{display:{base:"flex",md:"none"},onOpen:t}),Object(p.jsx)(A.d,{ml:{base:0,md:60},p:"4",children:Object(p.jsx)(d.b,{})})]})},ce=function(){return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("div",{children:["This page does not exist. Go ",Object(p.jsx)(c.b,{to:"/admin_panel",children:"home"})]})})},le=new l.a({uri:"https://graphqlzero.almansi.me/api",cache:new s.a}),se=function(){return Object(p.jsx)(o.a,{client:le,children:Object(p.jsx)(C,{children:Object(p.jsxs)(d.e,{children:[Object(p.jsxs)(d.c,{path:"admin_panel",element:Object(p.jsx)(N,{children:Object(p.jsx)(re,{})}),children:[Object(p.jsx)(d.c,{path:"albums",element:Object(p.jsx)(k,{})}),Object(p.jsx)(d.c,{path:"albums/:id",element:Object(p.jsx)(P,{})}),Object(p.jsx)(d.c,{path:"albums/:id/edit",element:Object(p.jsx)(I,{})}),Object(p.jsx)(d.c,{path:"albums/create",element:Object(p.jsx)(F,{})})]}),Object(p.jsx)(d.c,{path:"admin_panel/login",element:Object(p.jsx)(Z,{})}),Object(p.jsx)(d.c,{path:"*",element:Object(p.jsx)(ce,{})})]})})})};r.render(Object(p.jsx)(i.StrictMode,{children:Object(p.jsx)(c.a,{children:Object(p.jsx)(a.ChakraProvider,{children:Object(p.jsx)(se,{})})})}),document.getElementById("root"))}},[[279,1,2]]]);
//# sourceMappingURL=main.7f95ac7a.chunk.js.map